{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./policy.service\";\nimport * as i4 from \"../../core/services/notification.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/card\";\nimport * as i11 from \"@angular/material/progress-spinner\";\nimport * as i12 from \"@angular/material/select\";\nimport * as i13 from \"@angular/material/core\";\nimport * as i14 from \"@angular/material/datepicker\";\nimport * as i15 from \"@angular/material/chips\";\nfunction PolicyEditComponent_div_0_mat_icon_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"sync\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_icon_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"save\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Policy holder name is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Name must be at least 2 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Start date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" End date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_64_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" License plate is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Please enter a valid Thai license plate format \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_83_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Vehicle make is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_100_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Vehicle model is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_option_106_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 57);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const year_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", year_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(year_r3);\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_107_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Vehicle year is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_126_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Coverage type is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_mat_error_141_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Coverage amount is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PolicyEditComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7)(3, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function PolicyEditComponent_div_0_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵelementStart(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"arrow_back\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\", 9);\n    i0.ɵɵtext(7, \"Policy Management / Edit Policy\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 10)(9, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function PolicyEditComponent_div_0_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵtext(10, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function PolicyEditComponent_div_0_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSavePolicy());\n    });\n    i0.ɵɵtemplate(12, PolicyEditComponent_div_0_mat_icon_12_Template, 2, 0, \"mat-icon\", 13)(13, PolicyEditComponent_div_0_mat_icon_13_Template, 2, 0, \"mat-icon\", 13);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"mat-card\", 14)(16, \"mat-card-content\")(17, \"div\", 15)(18, \"div\")(19, \"h2\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"mat-chip\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(23, \"form\", 16);\n    i0.ɵɵlistener(\"ngSubmit\", function PolicyEditComponent_div_0_Template_form_ngSubmit_23_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSavePolicy());\n    });\n    i0.ɵɵelementStart(24, \"div\", 17)(25, \"mat-card\")(26, \"mat-card-header\")(27, \"mat-card-title\");\n    i0.ɵɵtext(28, \"Policy Information\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"mat-card-content\")(30, \"div\", 18)(31, \"mat-form-field\", 19)(32, \"mat-label\");\n    i0.ɵɵtext(33, \"Policy Holder Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(34, \"input\", 20);\n    i0.ɵɵtemplate(35, PolicyEditComponent_div_0_mat_error_35_Template, 2, 0, \"mat-error\", 13)(36, PolicyEditComponent_div_0_mat_error_36_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(37, \"div\", 18)(38, \"mat-form-field\", 21)(39, \"mat-label\");\n    i0.ɵɵtext(40, \"Start Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(41, \"input\", 22)(42, \"mat-datepicker-toggle\", 23)(43, \"mat-datepicker\", null, 0);\n    i0.ɵɵtemplate(45, PolicyEditComponent_div_0_mat_error_45_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"mat-form-field\", 21)(47, \"mat-label\");\n    i0.ɵɵtext(48, \"End Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(49, \"input\", 24)(50, \"mat-datepicker-toggle\", 23)(51, \"mat-datepicker\", null, 1);\n    i0.ɵɵtemplate(53, PolicyEditComponent_div_0_mat_error_53_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(54, \"mat-card\")(55, \"mat-card-header\")(56, \"mat-card-title\");\n    i0.ɵɵtext(57, \"Vehicle Information\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(58, \"mat-card-content\")(59, \"div\", 18)(60, \"mat-form-field\", 19)(61, \"mat-label\");\n    i0.ɵɵtext(62, \"License Plate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(63, \"input\", 25);\n    i0.ɵɵtemplate(64, PolicyEditComponent_div_0_mat_error_64_Template, 2, 0, \"mat-error\", 13)(65, PolicyEditComponent_div_0_mat_error_65_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(66, \"div\", 18)(67, \"mat-form-field\", 21)(68, \"mat-label\");\n    i0.ɵɵtext(69, \"Vehicle Make\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(70, \"mat-select\", 26)(71, \"mat-option\", 27);\n    i0.ɵɵtext(72, \"Toyota\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"mat-option\", 28);\n    i0.ɵɵtext(74, \"Honda\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"mat-option\", 29);\n    i0.ɵɵtext(76, \"Nissan\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(77, \"mat-option\", 30);\n    i0.ɵɵtext(78, \"Mazda\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(79, \"mat-option\", 31);\n    i0.ɵɵtext(80, \"Mitsubishi\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(81, \"mat-option\", 32);\n    i0.ɵɵtext(82, \"Isuzu\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(83, PolicyEditComponent_div_0_mat_error_83_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(84, \"mat-form-field\", 21)(85, \"mat-label\");\n    i0.ɵɵtext(86, \"Vehicle Model\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(87, \"mat-select\", 33)(88, \"mat-option\", 34);\n    i0.ɵɵtext(89, \"Camry\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(90, \"mat-option\", 35);\n    i0.ɵɵtext(91, \"Vios\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(92, \"mat-option\", 36);\n    i0.ɵɵtext(93, \"Altis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(94, \"mat-option\", 37);\n    i0.ɵɵtext(95, \"Civic\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(96, \"mat-option\", 38);\n    i0.ɵɵtext(97, \"City\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(98, \"mat-option\", 39);\n    i0.ɵɵtext(99, \"Accord\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(100, PolicyEditComponent_div_0_mat_error_100_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(101, \"div\", 18)(102, \"mat-form-field\", 21)(103, \"mat-label\");\n    i0.ɵɵtext(104, \"Year\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(105, \"mat-select\", 40);\n    i0.ɵɵtemplate(106, PolicyEditComponent_div_0_mat_option_106_Template, 2, 2, \"mat-option\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(107, PolicyEditComponent_div_0_mat_error_107_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(108, \"mat-card\")(109, \"mat-card-header\")(110, \"mat-card-title\");\n    i0.ɵɵtext(111, \"Coverage Information\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(112, \"mat-card-content\")(113, \"div\", 18)(114, \"mat-form-field\", 21)(115, \"mat-label\");\n    i0.ɵɵtext(116, \"Coverage Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(117, \"mat-select\", 42);\n    i0.ɵɵlistener(\"selectionChange\", function PolicyEditComponent_div_0_Template_mat_select_selectionChange_117_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.calculatePremium());\n    });\n    i0.ɵɵelementStart(118, \"mat-option\", 43);\n    i0.ɵɵtext(119, \"Basic Coverage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(120, \"mat-option\", 44);\n    i0.ɵɵtext(121, \"Standard Coverage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(122, \"mat-option\", 45);\n    i0.ɵɵtext(123, \"Comprehensive Coverage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(124, \"mat-option\", 46);\n    i0.ɵɵtext(125, \"Premium Coverage\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(126, PolicyEditComponent_div_0_mat_error_126_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(127, \"mat-form-field\", 21)(128, \"mat-label\");\n    i0.ɵɵtext(129, \"Coverage Amount (THB)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(130, \"mat-select\", 47);\n    i0.ɵɵlistener(\"selectionChange\", function PolicyEditComponent_div_0_Template_mat_select_selectionChange_130_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.calculatePremium());\n    });\n    i0.ɵɵelementStart(131, \"mat-option\", 48);\n    i0.ɵɵtext(132, \"500,000\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(133, \"mat-option\", 49);\n    i0.ɵɵtext(134, \"1,000,000\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(135, \"mat-option\", 50);\n    i0.ɵɵtext(136, \"2,000,000\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(137, \"mat-option\", 51);\n    i0.ɵɵtext(138, \"3,000,000\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(139, \"mat-option\", 52);\n    i0.ɵɵtext(140, \"5,000,000\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(141, PolicyEditComponent_div_0_mat_error_141_Template, 2, 0, \"mat-error\", 13);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(142, \"mat-card\", 53)(143, \"mat-card-header\")(144, \"mat-card-title\");\n    i0.ɵɵtext(145, \"Premium Calculation\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(146, \"mat-card-content\")(147, \"div\", 54)(148, \"div\", 55)(149, \"span\");\n    i0.ɵɵtext(150, \"Base Premium\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(151, \"span\");\n    i0.ɵɵtext(152);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(153, \"div\", 55)(154, \"span\");\n    i0.ɵɵtext(155, \"Coverage Premium\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(156, \"span\");\n    i0.ɵɵtext(157);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(158, \"div\", 55)(159, \"span\");\n    i0.ɵɵtext(160, \"Vehicle Age Adjustment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(161, \"span\");\n    i0.ɵɵtext(162);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(163, \"mat-divider\");\n    i0.ɵɵelementStart(164, \"div\", 56)(165, \"span\")(166, \"strong\");\n    i0.ɵɵtext(167, \"Total Annual Premium\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(168, \"span\")(169, \"strong\");\n    i0.ɵɵtext(170);\n    i0.ɵɵelementEnd()()()()()()()()();\n  }\n  if (rf & 2) {\n    let tmp_11_0;\n    let tmp_12_0;\n    let tmp_15_0;\n    let tmp_18_0;\n    let tmp_19_0;\n    let tmp_20_0;\n    let tmp_21_0;\n    let tmp_22_0;\n    let tmp_24_0;\n    let tmp_25_0;\n    let tmp_26_0;\n    const startPicker_r4 = i0.ɵɵreference(44);\n    const endPicker_r5 = i0.ɵɵreference(52);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.policyForm.invalid || ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isLoading ? \"Saving...\" : \"Save Changes\", \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Edit Policy \", ctx_r1.policy.policyNumber, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(\"status-chip-\" + ctx_r1.policy.status.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.policy.status, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.policyForm);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", (tmp_11_0 = ctx_r1.policyForm.get(\"holderName\")) == null ? null : tmp_11_0.hasError(\"required\"));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_12_0 = ctx_r1.policyForm.get(\"holderName\")) == null ? null : tmp_12_0.hasError(\"minlength\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matDatepicker\", startPicker_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", startPicker_r4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (tmp_15_0 = ctx_r1.policyForm.get(\"startDate\")) == null ? null : tmp_15_0.hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", endPicker_r5);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", endPicker_r5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (tmp_18_0 = ctx_r1.policyForm.get(\"endDate\")) == null ? null : tmp_18_0.hasError(\"required\"));\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", (tmp_19_0 = ctx_r1.policyForm.get(\"licensePlate\")) == null ? null : tmp_19_0.hasError(\"required\"));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_20_0 = ctx_r1.policyForm.get(\"licensePlate\")) == null ? null : tmp_20_0.hasError(\"pattern\"));\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngIf\", (tmp_21_0 = ctx_r1.policyForm.get(\"vehicleMake\")) == null ? null : tmp_21_0.hasError(\"required\"));\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngIf\", (tmp_22_0 = ctx_r1.policyForm.get(\"vehicleModel\")) == null ? null : tmp_22_0.hasError(\"required\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.years);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_24_0 = ctx_r1.policyForm.get(\"year\")) == null ? null : tmp_24_0.hasError(\"required\"));\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngIf\", (tmp_25_0 = ctx_r1.policyForm.get(\"coverageType\")) == null ? null : tmp_25_0.hasError(\"required\"));\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", (tmp_26_0 = ctx_r1.policyForm.get(\"coverageAmount\")) == null ? null : tmp_26_0.hasError(\"required\"));\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\"\\u0E3F\", ctx_r1.basePremium.toLocaleString(), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\u0E3F\", ctx_r1.coveragePremium.toLocaleString(), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\u0E3F\", ctx_r1.ageAdjustment.toLocaleString(), \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u0E3F\", ctx_r1.estimatedPremium.toLocaleString(), \"\");\n  }\n}\nfunction PolicyEditComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 58);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Loading policy information...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PolicyEditComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 59)(1, \"mat-icon\", 60);\n    i0.ɵɵtext(2, \"error_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Policy Not Found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 61);\n    i0.ɵɵlistener(\"click\", function PolicyEditComponent_div_2_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵtext(8, \" Go Back to Policy List \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nexport class PolicyEditComponent {\n  constructor(fb, route, router, policyService, notificationService) {\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.policyService = policyService;\n    this.notificationService = notificationService;\n    this.policy = null;\n    this.error = null;\n    this.isLoading = false;\n    this.years = [];\n    // Premium calculation variables\n    this.estimatedPremium = 0;\n    this.basePremium = 0;\n    this.coveragePremium = 0;\n    this.ageAdjustment = 0;\n    this.subscription = new Subscription();\n    this.initializeForm();\n    this.generateYears();\n  }\n  ngOnInit() {\n    const policyId = this.route.snapshot.paramMap.get('id');\n    if (policyId) {\n      this.loadPolicy(policyId);\n    } else {\n      this.error = 'Policy ID not provided';\n    }\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  initializeForm() {\n    this.policyForm = this.fb.group({\n      holderName: ['', [Validators.required, Validators.minLength(2)]],\n      licensePlate: ['', [Validators.required, Validators.pattern(/^[กข-๛]{1,2}-?\\d{1,4}\\s*[ก-๛\\s]*$/)]],\n      vehicleMake: ['', Validators.required],\n      vehicleModel: ['', Validators.required],\n      year: ['', Validators.required],\n      coverageType: ['', Validators.required],\n      coverageAmount: ['', Validators.required],\n      startDate: ['', Validators.required],\n      endDate: ['', Validators.required]\n    });\n    // Subscribe to form changes for premium calculation\n    this.subscription.add(this.policyForm.valueChanges.subscribe(() => {\n      this.calculatePremium();\n    }));\n  }\n  generateYears() {\n    const currentYear = new Date().getFullYear();\n    const startYear = 1990;\n    for (let year = currentYear; year >= startYear; year--) {\n      this.years.push(year);\n    }\n  }\n  loadPolicy(policyId) {\n    this.subscription.add(this.policyService.getPolicyById(policyId).subscribe({\n      next: policy => {\n        this.policy = policy;\n        this.populateForm(policy);\n      },\n      error: err => {\n        this.error = 'Policy not found or could not be loaded';\n        console.error('Error loading policy:', err);\n      }\n    }));\n  }\n  populateForm(policy) {\n    this.policyForm.patchValue({\n      holderName: policy.holderName,\n      licensePlate: policy.licensePlate,\n      vehicleMake: policy.vehicleMake,\n      vehicleModel: policy.vehicleModel,\n      year: policy.year,\n      coverageType: policy.coverageType,\n      coverageAmount: policy.coverageAmount,\n      startDate: policy.startDate,\n      endDate: policy.endDate\n    });\n    this.calculatePremium();\n  }\n  calculatePremium() {\n    if (this.policyForm.invalid) {\n      return;\n    }\n    const formValue = this.policyForm.value;\n    const currentYear = new Date().getFullYear();\n    const vehicleAge = currentYear - formValue.year;\n    // Base premium calculation\n    this.basePremium = 15000;\n    // Coverage type multiplier\n    const coverageMultiplier = {\n      'Basic': 1.0,\n      'Standard': 1.3,\n      'Comprehensive': 1.8,\n      'Premium': 2.5\n    };\n    // Coverage amount factor\n    const coverageAmount = parseFloat(formValue.coverageAmount) || 0;\n    const coverageFactor = coverageAmount / 1000000; // Per million THB\n    this.coveragePremium = this.basePremium * (coverageMultiplier[formValue.coverageType] || 1) * coverageFactor * 0.8;\n    // Age adjustment\n    let ageFactor = 1.0;\n    if (vehicleAge <= 3) ageFactor = 0.8;else if (vehicleAge <= 7) ageFactor = 1.0;else if (vehicleAge <= 15) ageFactor = 1.3;else ageFactor = 1.8;\n    this.ageAdjustment = this.basePremium * (ageFactor - 1);\n    // Calculate total\n    this.estimatedPremium = Math.round(this.basePremium + this.coveragePremium + this.ageAdjustment);\n  }\n  onSavePolicy() {\n    if (this.policyForm.invalid || !this.policy) {\n      this.markFormGroupTouched();\n      return;\n    }\n    this.isLoading = true;\n    const updatedPolicy = {\n      ...this.policy,\n      ...this.policyForm.value,\n      premium: this.estimatedPremium,\n      updatedDate: new Date()\n    };\n    this.subscription.add(this.policyService.updatePolicy(updatedPolicy).subscribe({\n      next: policy => {\n        this.notificationService.showSuccess('Policy updated successfully!');\n        this.router.navigate(['/policies', policy.id]);\n      },\n      error: err => {\n        this.notificationService.showError('Failed to update policy. Please try again.');\n        console.error('Error updating policy:', err);\n        this.isLoading = false;\n      }\n    }));\n  }\n  markFormGroupTouched() {\n    Object.keys(this.policyForm.controls).forEach(key => {\n      const control = this.policyForm.get(key);\n      control?.markAsTouched();\n    });\n  }\n  goBack() {\n    if (this.policy) {\n      this.router.navigate(['/policies', this.policy.id]);\n    } else {\n      this.router.navigate(['/policies']);\n    }\n  }\n  static {\n    this.ɵfac = function PolicyEditComponent_Factory(t) {\n      return new (t || PolicyEditComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.PolicyService), i0.ɵɵdirectiveInject(i4.NotificationService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PolicyEditComponent,\n      selectors: [[\"app-policy-edit\"]],\n      decls: 3,\n      vars: 3,\n      consts: [[\"startPicker\", \"\"], [\"endPicker\", \"\"], [\"class\", \"policy-edit-container\", 4, \"ngIf\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"error-container\", 4, \"ngIf\"], [1, \"policy-edit-container\"], [1, \"header-section\"], [1, \"breadcrumb\"], [\"mat-icon-button\", \"\", 3, \"click\"], [1, \"breadcrumb-text\"], [1, \"header-actions\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [4, \"ngIf\"], [1, \"status-banner\"], [1, \"policy-header\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-grid\"], [1, \"form-row\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"formControlName\", \"holderName\", \"placeholder\", \"Enter policy holder name\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"startDate\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"matInput\", \"\", \"formControlName\", \"endDate\", 3, \"matDatepicker\"], [\"matInput\", \"\", \"formControlName\", \"licensePlate\", \"placeholder\", \"\\u0E01\\u0E01-1234 \\u0E01\\u0E23\\u0E38\\u0E07\\u0E40\\u0E17\\u0E1E\\u0E21\\u0E2B\\u0E32\\u0E19\\u0E04\\u0E23\"], [\"formControlName\", \"vehicleMake\"], [\"value\", \"Toyota\"], [\"value\", \"Honda\"], [\"value\", \"Nissan\"], [\"value\", \"Mazda\"], [\"value\", \"Mitsubishi\"], [\"value\", \"Isuzu\"], [\"formControlName\", \"vehicleModel\"], [\"value\", \"Camry\"], [\"value\", \"Vios\"], [\"value\", \"Altis\"], [\"value\", \"Civic\"], [\"value\", \"City\"], [\"value\", \"Accord\"], [\"formControlName\", \"year\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"coverageType\", 3, \"selectionChange\"], [\"value\", \"Basic\"], [\"value\", \"Standard\"], [\"value\", \"Comprehensive\"], [\"value\", \"Premium\"], [\"formControlName\", \"coverageAmount\", 3, \"selectionChange\"], [\"value\", \"500000\"], [\"value\", \"1000000\"], [\"value\", \"2000000\"], [\"value\", \"3000000\"], [\"value\", \"5000000\"], [1, \"premium-card\"], [1, \"premium-breakdown\"], [1, \"premium-row\"], [1, \"premium-row\", \"total\"], [3, \"value\"], [1, \"loading-container\"], [1, \"error-container\"], [1, \"error-icon\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n      template: function PolicyEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, PolicyEditComponent_div_0_Template, 171, 29, \"div\", 2)(1, PolicyEditComponent_div_1_Template, 4, 0, \"div\", 3)(2, PolicyEditComponent_div_2_Template, 9, 1, \"div\", 4);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.policy);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.policy && !ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.MatButton, i6.MatIconButton, i7.MatIcon, i8.MatInput, i9.MatFormField, i9.MatLabel, i9.MatError, i9.MatSuffix, i10.MatCard, i10.MatCardContent, i10.MatCardHeader, i10.MatCardTitle, i11.MatProgressSpinner, i12.MatSelect, i13.MatOption, i14.MatDatepicker, i14.MatDatepickerInput, i14.MatDatepickerToggle, i15.MatChip],\n      styles: [\".policy-edit-container[_ngcontent-%COMP%] {\\n  padding: 24px;\\n  max-width: 1200px;\\n  margin: 0 auto;\\n}\\n\\n.header-section[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 24px;\\n}\\n\\n.breadcrumb[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  color: #666;\\n}\\n\\n.breadcrumb-text[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n}\\n\\n.header-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 12px;\\n  align-items: center;\\n}\\n\\n.status-banner[_ngcontent-%COMP%] {\\n  margin-bottom: 24px;\\n}\\n\\n.policy-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  margin: 0 0 8px 0;\\n  color: #333;\\n}\\n\\n.status-chip-active[_ngcontent-%COMP%] {\\n  background-color: #4caf50;\\n  color: white;\\n}\\n\\n.status-chip-pending[_ngcontent-%COMP%] {\\n  background-color: #ff9800;\\n  color: white;\\n}\\n\\n.status-chip-expired[_ngcontent-%COMP%] {\\n  background-color: #f44336;\\n  color: white;\\n}\\n\\n.form-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\\n  gap: 24px;\\n}\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 16px;\\n  align-items: flex-start;\\n  margin-bottom: 16px;\\n}\\n\\n.form-row[_ngcontent-%COMP%]:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.full-width[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.form-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n\\n.premium-card[_ngcontent-%COMP%] {\\n  grid-column: 1/-1;\\n  background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);\\n}\\n\\n.premium-breakdown[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.premium-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 8px 0;\\n}\\n\\n.premium-row.total[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n  padding-top: 16px;\\n  font-size: 18px;\\n  color: #1976d2;\\n}\\n\\n.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 48px;\\n  text-align: center;\\n}\\n\\n.error-icon[_ngcontent-%COMP%] {\\n  font-size: 48px;\\n  color: #f44336;\\n  margin-bottom: 16px;\\n}\\n\\n.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin: 16px 0 8px;\\n  color: #333;\\n}\\n\\n.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-bottom: 24px;\\n  color: #666;\\n}\\n\\n@media (max-width: 768px) {\\n  .header-section[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    gap: 16px;\\n    align-items: stretch;\\n  }\\n  .form-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n  .form-row[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    gap: 16px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcG9saWN5L3BvbGljeS1lZGl0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNFLGFBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7QUFBTjs7QUFHSTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7QUFBTjs7QUFHSTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFFBQUE7RUFDQSxXQUFBO0FBQU47O0FBR0k7RUFDRSxlQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0EsU0FBQTtFQUNBLG1CQUFBO0FBQU47O0FBR0k7RUFDRSxtQkFBQTtBQUFOOztBQUdJO0VBQ0UsaUJBQUE7RUFDQSxXQUFBO0FBQU47O0FBR0k7RUFDRSx5QkFBQTtFQUNBLFlBQUE7QUFBTjs7QUFHSTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtBQUFOOztBQUdJO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0EsMkRBQUE7RUFDQSxTQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0EsU0FBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFBTjs7QUFHSTtFQUNFLGdCQUFBO0FBQU47O0FBR0k7RUFDRSxXQUFBO0FBQU47O0FBR0k7RUFDRSxPQUFBO0FBQU47O0FBR0k7RUFDRSxpQkFBQTtFQUNBLDZEQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxTQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7QUFBTjs7QUFHSTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7RUFDQSxjQUFBO0FBQU47O0FBR0k7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0FBQU47O0FBR0k7RUFDRSxlQUFBO0VBQ0EsY0FBQTtFQUNBLG1CQUFBO0FBQU47O0FBR0k7RUFDRSxrQkFBQTtFQUNBLFdBQUE7QUFBTjs7QUFHSTtFQUNFLG1CQUFBO0VBQ0EsV0FBQTtBQUFOOztBQUdJO0VBQ0U7SUFDRSxzQkFBQTtJQUNBLFNBQUE7SUFDQSxvQkFBQTtFQUFOO0VBR0k7SUFDRSwwQkFBQTtFQUROO0VBSUk7SUFDRSxzQkFBQTtJQUNBLFNBQUE7RUFGTjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgLnBvbGljeS1lZGl0LWNvbnRhaW5lciB7XG4gICAgICBwYWRkaW5nOiAyNHB4O1xuICAgICAgbWF4LXdpZHRoOiAxMjAwcHg7XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICB9XG5cbiAgICAuaGVhZGVyLXNlY3Rpb24ge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBtYXJnaW4tYm90dG9tOiAyNHB4O1xuICAgIH1cblxuICAgIC5icmVhZGNydW1iIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZ2FwOiA4cHg7XG4gICAgICBjb2xvcjogIzY2NjtcbiAgICB9XG5cbiAgICAuYnJlYWRjcnVtYi10ZXh0IHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB9XG5cbiAgICAuaGVhZGVyLWFjdGlvbnMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogMTJweDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLnN0YXR1cy1iYW5uZXIge1xuICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICB9XG5cbiAgICAucG9saWN5LWhlYWRlciBoMiB7XG4gICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgIH1cblxuICAgIC5zdGF0dXMtY2hpcC1hY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcbiAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICB9XG5cbiAgICAuc3RhdHVzLWNoaXAtcGVuZGluZyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5ODAwO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cblxuICAgIC5zdGF0dXMtY2hpcC1leHBpcmVkIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNDQzMzY7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgfVxuXG4gICAgLmZvcm0tZ3JpZCB7XG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCg0MDBweCwgMWZyKSk7XG4gICAgICBnYXA6IDI0cHg7XG4gICAgfVxuXG4gICAgLmZvcm0tcm93IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDE2cHg7XG4gICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgfVxuXG4gICAgLmZvcm0tcm93Omxhc3QtY2hpbGQge1xuICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICB9XG5cbiAgICAuZnVsbC13aWR0aCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbiAgICAuZm9ybS1yb3cgLm1hdC1mb3JtLWZpZWxkIHtcbiAgICAgIGZsZXg6IDE7XG4gICAgfVxuXG4gICAgLnByZW1pdW0tY2FyZCB7XG4gICAgICBncmlkLWNvbHVtbjogMSAvIC0xO1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2UzZjJmZCAwJSwgI2YzZTVmNSAxMDAlKTtcbiAgICB9XG5cbiAgICAucHJlbWl1bS1icmVha2Rvd24ge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBnYXA6IDEycHg7XG4gICAgfVxuXG4gICAgLnByZW1pdW0tcm93IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgcGFkZGluZzogOHB4IDA7XG4gICAgfVxuXG4gICAgLnByZW1pdW0tcm93LnRvdGFsIHtcbiAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgY29sb3I6ICMxOTc2ZDI7XG4gICAgfVxuXG4gICAgLmxvYWRpbmctY29udGFpbmVyLCAuZXJyb3ItY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgcGFkZGluZzogNDhweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZXJyb3ItaWNvbiB7XG4gICAgICBmb250LXNpemU6IDQ4cHg7XG4gICAgICBjb2xvcjogI2Y0NDMzNjtcbiAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgfVxuXG4gICAgLmVycm9yLWNvbnRhaW5lciBoMyB7XG4gICAgICBtYXJnaW46IDE2cHggMCA4cHg7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICB9XG5cbiAgICAuZXJyb3ItY29udGFpbmVyIHAge1xuICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICAgIGNvbG9yOiAjNjY2O1xuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgLmhlYWRlci1zZWN0aW9uIHtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICAgIH1cblxuICAgICAgLmZvcm0tZ3JpZCB7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgfVxuXG4gICAgICAuZm9ybS1yb3cge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICB9XG4gICAgfVxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","Subscription","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","year_r3","ɵɵadvance","ɵɵtextInterpolate","ɵɵlistener","PolicyEditComponent_div_0_Template_button_click_3_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","goBack","PolicyEditComponent_div_0_Template_button_click_9_listener","PolicyEditComponent_div_0_Template_button_click_11_listener","onSavePolicy","ɵɵtemplate","PolicyEditComponent_div_0_mat_icon_12_Template","PolicyEditComponent_div_0_mat_icon_13_Template","PolicyEditComponent_div_0_Template_form_ngSubmit_23_listener","ɵɵelement","PolicyEditComponent_div_0_mat_error_35_Template","PolicyEditComponent_div_0_mat_error_36_Template","PolicyEditComponent_div_0_mat_error_45_Template","PolicyEditComponent_div_0_mat_error_53_Template","PolicyEditComponent_div_0_mat_error_64_Template","PolicyEditComponent_div_0_mat_error_65_Template","PolicyEditComponent_div_0_mat_error_83_Template","PolicyEditComponent_div_0_mat_error_100_Template","PolicyEditComponent_div_0_mat_option_106_Template","PolicyEditComponent_div_0_mat_error_107_Template","PolicyEditComponent_div_0_Template_mat_select_selectionChange_117_listener","calculatePremium","PolicyEditComponent_div_0_mat_error_126_Template","PolicyEditComponent_div_0_Template_mat_select_selectionChange_130_listener","PolicyEditComponent_div_0_mat_error_141_Template","policyForm","invalid","isLoading","ɵɵtextInterpolate1","policy","policyNumber","ɵɵclassMap","status","toLowerCase","tmp_11_0","get","hasError","tmp_12_0","startPicker_r4","tmp_15_0","endPicker_r5","tmp_18_0","tmp_19_0","tmp_20_0","tmp_21_0","tmp_22_0","years","tmp_24_0","tmp_25_0","tmp_26_0","basePremium","toLocaleString","coveragePremium","ageAdjustment","estimatedPremium","PolicyEditComponent_div_2_Template_button_click_7_listener","_r6","error","PolicyEditComponent","constructor","fb","route","router","policyService","notificationService","subscription","initializeForm","generateYears","ngOnInit","policyId","snapshot","paramMap","loadPolicy","ngOnDestroy","unsubscribe","group","holderName","required","minLength","licensePlate","pattern","vehicleMake","vehicleModel","year","coverageType","coverageAmount","startDate","endDate","add","valueChanges","subscribe","currentYear","Date","getFullYear","startYear","push","getPolicyById","next","populateForm","err","console","patchValue","formValue","value","vehicleAge","coverageMultiplier","parseFloat","coverageFactor","ageFactor","Math","round","markFormGroupTouched","updatedPolicy","premium","updatedDate","updatePolicy","showSuccess","navigate","id","showError","Object","keys","controls","forEach","key","control","markAsTouched","ɵɵdirectiveInject","i1","FormBuilder","i2","ActivatedRoute","Router","i3","PolicyService","i4","NotificationService","selectors","decls","vars","consts","template","PolicyEditComponent_Template","rf","ctx","PolicyEditComponent_div_0_Template","PolicyEditComponent_div_1_Template","PolicyEditComponent_div_2_Template"],"sources":["/Users/mvvkiran/Workspace/Angular/auto-insurance-app/frontend/src/app/features/policy/policy-edit.component.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PolicyService, Policy } from './policy.service';\nimport { NotificationService } from '../../core/services/notification.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-policy-edit',\n  template: `\n    <div class=\"policy-edit-container\" *ngIf=\"policy\">\n      <div class=\"header-section\">\n        <div class=\"breadcrumb\">\n          <button mat-icon-button (click)=\"goBack()\">\n            <mat-icon>arrow_back</mat-icon>\n          </button>\n          <span class=\"breadcrumb-text\">Policy Management / Edit Policy</span>\n        </div>\n        <div class=\"header-actions\">\n          <button mat-button (click)=\"goBack()\">Cancel</button>\n          <button mat-raised-button \n                  color=\"primary\" \n                  (click)=\"onSavePolicy()\" \n                  [disabled]=\"policyForm.invalid || isLoading\">\n            <mat-icon *ngIf=\"isLoading\">sync</mat-icon>\n            <mat-icon *ngIf=\"!isLoading\">save</mat-icon>\n            {{ isLoading ? 'Saving...' : 'Save Changes' }}\n          </button>\n        </div>\n      </div>\n\n      <!-- Policy Status Banner -->\n      <mat-card class=\"status-banner\">\n        <mat-card-content>\n          <div class=\"policy-header\">\n            <div>\n              <h2>Edit Policy {{ policy.policyNumber }}</h2>\n              <mat-chip [class]=\"'status-chip-' + policy.status.toLowerCase()\">\n                {{ policy.status }}\n              </mat-chip>\n            </div>\n          </div>\n        </mat-card-content>\n      </mat-card>\n\n      <!-- Edit Form -->\n      <form [formGroup]=\"policyForm\" (ngSubmit)=\"onSavePolicy()\">\n        <div class=\"form-grid\">\n\n          <!-- Policy Information -->\n          <mat-card>\n            <mat-card-header>\n              <mat-card-title>Policy Information</mat-card-title>\n            </mat-card-header>\n            <mat-card-content>\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\" class=\"full-width\">\n                  <mat-label>Policy Holder Name</mat-label>\n                  <input matInput formControlName=\"holderName\" placeholder=\"Enter policy holder name\">\n                  <mat-error *ngIf=\"policyForm.get('holderName')?.hasError('required')\">\n                    Policy holder name is required\n                  </mat-error>\n                  <mat-error *ngIf=\"policyForm.get('holderName')?.hasError('minlength')\">\n                    Name must be at least 2 characters\n                  </mat-error>\n                </mat-form-field>\n              </div>\n\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Start Date</mat-label>\n                  <input matInput [matDatepicker]=\"startPicker\" formControlName=\"startDate\">\n                  <mat-datepicker-toggle matSuffix [for]=\"startPicker\"></mat-datepicker-toggle>\n                  <mat-datepicker #startPicker></mat-datepicker>\n                  <mat-error *ngIf=\"policyForm.get('startDate')?.hasError('required')\">\n                    Start date is required\n                  </mat-error>\n                </mat-form-field>\n\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>End Date</mat-label>\n                  <input matInput [matDatepicker]=\"endPicker\" formControlName=\"endDate\">\n                  <mat-datepicker-toggle matSuffix [for]=\"endPicker\"></mat-datepicker-toggle>\n                  <mat-datepicker #endPicker></mat-datepicker>\n                  <mat-error *ngIf=\"policyForm.get('endDate')?.hasError('required')\">\n                    End date is required\n                  </mat-error>\n                </mat-form-field>\n              </div>\n            </mat-card-content>\n          </mat-card>\n\n          <!-- Vehicle Information -->\n          <mat-card>\n            <mat-card-header>\n              <mat-card-title>Vehicle Information</mat-card-title>\n            </mat-card-header>\n            <mat-card-content>\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\" class=\"full-width\">\n                  <mat-label>License Plate</mat-label>\n                  <input matInput formControlName=\"licensePlate\" placeholder=\"กก-1234 กรุงเทพมหานคร\">\n                  <mat-error *ngIf=\"policyForm.get('licensePlate')?.hasError('required')\">\n                    License plate is required\n                  </mat-error>\n                  <mat-error *ngIf=\"policyForm.get('licensePlate')?.hasError('pattern')\">\n                    Please enter a valid Thai license plate format\n                  </mat-error>\n                </mat-form-field>\n              </div>\n\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Vehicle Make</mat-label>\n                  <mat-select formControlName=\"vehicleMake\">\n                    <mat-option value=\"Toyota\">Toyota</mat-option>\n                    <mat-option value=\"Honda\">Honda</mat-option>\n                    <mat-option value=\"Nissan\">Nissan</mat-option>\n                    <mat-option value=\"Mazda\">Mazda</mat-option>\n                    <mat-option value=\"Mitsubishi\">Mitsubishi</mat-option>\n                    <mat-option value=\"Isuzu\">Isuzu</mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"policyForm.get('vehicleMake')?.hasError('required')\">\n                    Vehicle make is required\n                  </mat-error>\n                </mat-form-field>\n\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Vehicle Model</mat-label>\n                  <mat-select formControlName=\"vehicleModel\">\n                    <mat-option value=\"Camry\">Camry</mat-option>\n                    <mat-option value=\"Vios\">Vios</mat-option>\n                    <mat-option value=\"Altis\">Altis</mat-option>\n                    <mat-option value=\"Civic\">Civic</mat-option>\n                    <mat-option value=\"City\">City</mat-option>\n                    <mat-option value=\"Accord\">Accord</mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"policyForm.get('vehicleModel')?.hasError('required')\">\n                    Vehicle model is required\n                  </mat-error>\n                </mat-form-field>\n              </div>\n\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Year</mat-label>\n                  <mat-select formControlName=\"year\">\n                    <mat-option *ngFor=\"let year of years\" [value]=\"year\">{{ year }}</mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"policyForm.get('year')?.hasError('required')\">\n                    Vehicle year is required\n                  </mat-error>\n                </mat-form-field>\n              </div>\n            </mat-card-content>\n          </mat-card>\n\n          <!-- Coverage Information -->\n          <mat-card>\n            <mat-card-header>\n              <mat-card-title>Coverage Information</mat-card-title>\n            </mat-card-header>\n            <mat-card-content>\n              <div class=\"form-row\">\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Coverage Type</mat-label>\n                  <mat-select formControlName=\"coverageType\" (selectionChange)=\"calculatePremium()\">\n                    <mat-option value=\"Basic\">Basic Coverage</mat-option>\n                    <mat-option value=\"Standard\">Standard Coverage</mat-option>\n                    <mat-option value=\"Comprehensive\">Comprehensive Coverage</mat-option>\n                    <mat-option value=\"Premium\">Premium Coverage</mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"policyForm.get('coverageType')?.hasError('required')\">\n                    Coverage type is required\n                  </mat-error>\n                </mat-form-field>\n\n                <mat-form-field appearance=\"outline\">\n                  <mat-label>Coverage Amount (THB)</mat-label>\n                  <mat-select formControlName=\"coverageAmount\" (selectionChange)=\"calculatePremium()\">\n                    <mat-option value=\"500000\">500,000</mat-option>\n                    <mat-option value=\"1000000\">1,000,000</mat-option>\n                    <mat-option value=\"2000000\">2,000,000</mat-option>\n                    <mat-option value=\"3000000\">3,000,000</mat-option>\n                    <mat-option value=\"5000000\">5,000,000</mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"policyForm.get('coverageAmount')?.hasError('required')\">\n                    Coverage amount is required\n                  </mat-error>\n                </mat-form-field>\n              </div>\n            </mat-card-content>\n          </mat-card>\n\n          <!-- Premium Information -->\n          <mat-card class=\"premium-card\">\n            <mat-card-header>\n              <mat-card-title>Premium Calculation</mat-card-title>\n            </mat-card-header>\n            <mat-card-content>\n              <div class=\"premium-breakdown\">\n                <div class=\"premium-row\">\n                  <span>Base Premium</span>\n                  <span>฿{{ basePremium.toLocaleString() }}</span>\n                </div>\n                <div class=\"premium-row\">\n                  <span>Coverage Premium</span>\n                  <span>฿{{ coveragePremium.toLocaleString() }}</span>\n                </div>\n                <div class=\"premium-row\">\n                  <span>Vehicle Age Adjustment</span>\n                  <span>฿{{ ageAdjustment.toLocaleString() }}</span>\n                </div>\n                <mat-divider></mat-divider>\n                <div class=\"premium-row total\">\n                  <span><strong>Total Annual Premium</strong></span>\n                  <span><strong>฿{{ estimatedPremium.toLocaleString() }}</strong></span>\n                </div>\n              </div>\n            </mat-card-content>\n          </mat-card>\n\n        </div>\n      </form>\n    </div>\n\n    <!-- Loading State -->\n    <div class=\"loading-container\" *ngIf=\"!policy && !error\">\n      <mat-spinner></mat-spinner>\n      <p>Loading policy information...</p>\n    </div>\n\n    <!-- Error State -->\n    <div class=\"error-container\" *ngIf=\"error\">\n      <mat-icon class=\"error-icon\">error_outline</mat-icon>\n      <h3>Policy Not Found</h3>\n      <p>{{ error }}</p>\n      <button mat-raised-button color=\"primary\" (click)=\"goBack()\">\n        Go Back to Policy List\n      </button>\n    </div>\n  `,\n  styles: [`\n    .policy-edit-container {\n      padding: 24px;\n      max-width: 1200px;\n      margin: 0 auto;\n    }\n\n    .header-section {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 24px;\n    }\n\n    .breadcrumb {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      color: #666;\n    }\n\n    .breadcrumb-text {\n      font-size: 14px;\n    }\n\n    .header-actions {\n      display: flex;\n      gap: 12px;\n      align-items: center;\n    }\n\n    .status-banner {\n      margin-bottom: 24px;\n    }\n\n    .policy-header h2 {\n      margin: 0 0 8px 0;\n      color: #333;\n    }\n\n    .status-chip-active {\n      background-color: #4caf50;\n      color: white;\n    }\n\n    .status-chip-pending {\n      background-color: #ff9800;\n      color: white;\n    }\n\n    .status-chip-expired {\n      background-color: #f44336;\n      color: white;\n    }\n\n    .form-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n      gap: 24px;\n    }\n\n    .form-row {\n      display: flex;\n      gap: 16px;\n      align-items: flex-start;\n      margin-bottom: 16px;\n    }\n\n    .form-row:last-child {\n      margin-bottom: 0;\n    }\n\n    .full-width {\n      width: 100%;\n    }\n\n    .form-row .mat-form-field {\n      flex: 1;\n    }\n\n    .premium-card {\n      grid-column: 1 / -1;\n      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);\n    }\n\n    .premium-breakdown {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .premium-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 8px 0;\n    }\n\n    .premium-row.total {\n      margin-top: 8px;\n      padding-top: 16px;\n      font-size: 18px;\n      color: #1976d2;\n    }\n\n    .loading-container, .error-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      padding: 48px;\n      text-align: center;\n    }\n\n    .error-icon {\n      font-size: 48px;\n      color: #f44336;\n      margin-bottom: 16px;\n    }\n\n    .error-container h3 {\n      margin: 16px 0 8px;\n      color: #333;\n    }\n\n    .error-container p {\n      margin-bottom: 24px;\n      color: #666;\n    }\n\n    @media (max-width: 768px) {\n      .header-section {\n        flex-direction: column;\n        gap: 16px;\n        align-items: stretch;\n      }\n\n      .form-grid {\n        grid-template-columns: 1fr;\n      }\n\n      .form-row {\n        flex-direction: column;\n        gap: 16px;\n      }\n    }\n  `]\n})\nexport class PolicyEditComponent implements OnInit, OnDestroy {\n  policy: Policy | null = null;\n  policyForm!: FormGroup;\n  error: string | null = null;\n  isLoading = false;\n  years: number[] = [];\n  \n  // Premium calculation variables\n  estimatedPremium = 0;\n  basePremium = 0;\n  coveragePremium = 0;\n  ageAdjustment = 0;\n\n  private subscription: Subscription = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private policyService: PolicyService,\n    private notificationService: NotificationService\n  ) {\n    this.initializeForm();\n    this.generateYears();\n  }\n\n  ngOnInit(): void {\n    const policyId = this.route.snapshot.paramMap.get('id');\n    \n    if (policyId) {\n      this.loadPolicy(policyId);\n    } else {\n      this.error = 'Policy ID not provided';\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  private initializeForm(): void {\n    this.policyForm = this.fb.group({\n      holderName: ['', [Validators.required, Validators.minLength(2)]],\n      licensePlate: ['', [Validators.required, Validators.pattern(/^[กข-๛]{1,2}-?\\d{1,4}\\s*[ก-๛\\s]*$/)]],\n      vehicleMake: ['', Validators.required],\n      vehicleModel: ['', Validators.required],\n      year: ['', Validators.required],\n      coverageType: ['', Validators.required],\n      coverageAmount: ['', Validators.required],\n      startDate: ['', Validators.required],\n      endDate: ['', Validators.required]\n    });\n\n    // Subscribe to form changes for premium calculation\n    this.subscription.add(\n      this.policyForm.valueChanges.subscribe(() => {\n        this.calculatePremium();\n      })\n    );\n  }\n\n  private generateYears(): void {\n    const currentYear = new Date().getFullYear();\n    const startYear = 1990;\n    \n    for (let year = currentYear; year >= startYear; year--) {\n      this.years.push(year);\n    }\n  }\n\n  private loadPolicy(policyId: string): void {\n    this.subscription.add(\n      this.policyService.getPolicyById(policyId).subscribe({\n        next: (policy) => {\n          this.policy = policy;\n          this.populateForm(policy);\n        },\n        error: (err) => {\n          this.error = 'Policy not found or could not be loaded';\n          console.error('Error loading policy:', err);\n        }\n      })\n    );\n  }\n\n  private populateForm(policy: Policy): void {\n    this.policyForm.patchValue({\n      holderName: policy.holderName,\n      licensePlate: policy.licensePlate,\n      vehicleMake: policy.vehicleMake,\n      vehicleModel: policy.vehicleModel,\n      year: policy.year,\n      coverageType: policy.coverageType,\n      coverageAmount: policy.coverageAmount,\n      startDate: policy.startDate,\n      endDate: policy.endDate\n    });\n\n    this.calculatePremium();\n  }\n\n  calculatePremium(): void {\n    if (this.policyForm.invalid) {\n      return;\n    }\n\n    const formValue = this.policyForm.value;\n    const currentYear = new Date().getFullYear();\n    const vehicleAge = currentYear - formValue.year;\n\n    // Base premium calculation\n    this.basePremium = 15000;\n\n    // Coverage type multiplier\n    const coverageMultiplier = {\n      'Basic': 1.0,\n      'Standard': 1.3,\n      'Comprehensive': 1.8,\n      'Premium': 2.5\n    };\n\n    // Coverage amount factor\n    const coverageAmount = parseFloat(formValue.coverageAmount) || 0;\n    const coverageFactor = coverageAmount / 1000000; // Per million THB\n\n    this.coveragePremium = this.basePremium * \n      (coverageMultiplier[formValue.coverageType as keyof typeof coverageMultiplier] || 1) * \n      coverageFactor * 0.8;\n\n    // Age adjustment\n    let ageFactor = 1.0;\n    if (vehicleAge <= 3) ageFactor = 0.8;\n    else if (vehicleAge <= 7) ageFactor = 1.0;\n    else if (vehicleAge <= 15) ageFactor = 1.3;\n    else ageFactor = 1.8;\n\n    this.ageAdjustment = this.basePremium * (ageFactor - 1);\n\n    // Calculate total\n    this.estimatedPremium = Math.round(this.basePremium + this.coveragePremium + this.ageAdjustment);\n  }\n\n  onSavePolicy(): void {\n    if (this.policyForm.invalid || !this.policy) {\n      this.markFormGroupTouched();\n      return;\n    }\n\n    this.isLoading = true;\n    \n    const updatedPolicy: Policy = {\n      ...this.policy,\n      ...this.policyForm.value,\n      premium: this.estimatedPremium,\n      updatedDate: new Date()\n    };\n\n    this.subscription.add(\n      this.policyService.updatePolicy(updatedPolicy).subscribe({\n        next: (policy) => {\n          this.notificationService.showSuccess('Policy updated successfully!');\n          this.router.navigate(['/policies', policy.id]);\n        },\n        error: (err) => {\n          this.notificationService.showError('Failed to update policy. Please try again.');\n          console.error('Error updating policy:', err);\n          this.isLoading = false;\n        }\n      })\n    );\n  }\n\n  private markFormGroupTouched(): void {\n    Object.keys(this.policyForm.controls).forEach(key => {\n      const control = this.policyForm.get(key);\n      control?.markAsTouched();\n    });\n  }\n\n  goBack(): void {\n    if (this.policy) {\n      this.router.navigate(['/policies', this.policy.id]);\n    } else {\n      this.router.navigate(['/policies']);\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}